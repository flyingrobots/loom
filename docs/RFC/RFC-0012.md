---
Status: Draft**
Author: James Ross
Contributors: JIT Community**
Requires:
- RFC-0001 Node Identity
- RFC-0002 DAG Invariants
- RFC-0003 SWS
- RFC-0004 Materialized Head
- RFC-0005 Inversion Engine
- RFC-0006 WAL
- RFC-0010 Ref Semantics
- RFC-0011 Distributed Sync**
Start Date: 2025-11-28**
Target Spec: JITOS v0.x**
License: TBD**
---

# JIT RFC-0012

## JITOS Boot Sequence (JBS v1.0)

### How a Causal Operating System Awakens


---

1. Summary

This RFC defines the boot procedure for the JIT Operating System (JITOS).

Unlike traditional OSes that:

- scan disks
- mount filesystems
- initialize memory
- load executables

JITOS must:

- reconstruct reality
- replay time
- re-materialize projections
- rehydrate shadows
- recover causal structure
- validate references
- rebuild indexes
- enforce invariants
- perform distributed negotiation

JITOS boot is not startup —
it is resurrection.

This RFC describes how the kernel wakes up after death
and restores the universe exactly as it was.

---

2. Motivation

In a causal OS:

- time is the WAL
- space is the DAG
- perception is Materialized Head
- processes are Shadow Working Sets

The kernel can crash.
The machine can reboot.
Interruptions can occur.

But truth must survive.

Thus, JITOS must:

- restore immutable history
- reestablish shadow universes
- re-project human views
- re-link distributed edges
- ensure causal continuity
- guarantee deterministic recovery

This RFC defines that process.

---

3. Boot Phases

JITOS boot occurs in seven deterministic phases.

These phases MUST occur in this exact order.

---

Phase 1 — Substrate Scan

The system scans .gitd/ and locates:

nodes/      → local DAG fragments
index/      → LMDB indices
cache/      → MH projection cache
wal/        → write-ahead log
refs/       → reference pointers
metadata/   → repository config

Goal: Identify the universe.

If ANY of these are missing:
- JITOS MAY initiate recovery
- JITOS MUST NOT mutate existing node content

---

Phase 2 — DAG Rebuild

The system reconstructs:

- node identity map
- adjacency lists
- parent relationships
- child relationships
- type mappings
- timestamp ordering

Rules:

- MUST validate BLAKE3 hashes
- MUST enforce causal invariants
- MUST identify frontier nodes
- MUST rebuild topological order

If DAG is corrupted → recovery mode.

---

Phase 3 — WAL Replay

The WAL is replayed from last checkpoint.

WAL entries:

- rebuild indexes
- update refs
- reconstruct MH
- reconstitute SWS
- advance logical time

Replay MUST be:

- deterministic
- idempotent
- complete
- invariant-preserving

Replay is the reanimation of time.

---

Phase 4 — Index Rehydration

JITOS restores all indexes from DAG + WAL:

- LMDB node index
- tree-index (MH)
- SWS metadata
- ref index
- warm/cold tier mappings

This phase restores order to the universe.

---

Phase 5 — Materialized Head Reconstruction

The filesystem projection MUST be:

- reconstructed incrementally
- checked for conflicts
- aligned with HEAD
- refreshed deterministically
- purged of stale files

MH is the cave wall.

This is the moment when the shadows return.

---

Phase 6 — SWS Rehydration

All Shadow Working Sets MUST be:

- restored
- validated
- or discarded if stale

Rules:

- If base_node still valid → SWS restored
- If remote updates occurred → SWS invalidated
- If WAL indicates partial collapse → rollback

Agents suspended during crash must resume cleanly.

SWS are observer-relative timelines;
they must come back EXACTLY as they were.

---

Phase 7 — Distributed Sync Initialization

Once local truth restored:

- JITOS broadcasts hello
- pulls remote refs
- fetches missing frontier nodes
- performs frontier negotiation
- checks for conflicts
- initiates remote subgraph transfer if needed

Only after sync completes does JITOS declare:

System Ready

This is the “rejoin the universe” moment.

---

4. Boot Invariants

The following MUST hold:

Invariant 1 — Past is preserved

Boot MUST NOT mutate any existing node.

Invariant 2 — Indexes are consistent

All LMDB index state MUST reflect DAG state after replay.

Invariant 3 — MH is deterministic

Filesystem projection MUST be identical across machines from identical DAG states.

Invariant 4 — Ref integrity

Refs MUST point to valid nodes.

Invariant 5 — SWS validity

Shadows MUST NOT resurrect if logically inconsistent.

Invariant 6 — WAL completeness

All WAL entries MUST be applied or ignored based on checksum validity.

Invariant 7 — Distributed truth

After boot, the system MUST eventually converge via sync.

---

5. Failure Modes

If failure occurs:

5.1 Corrupted DAG Node

→ quarantine
→ remote fetch
→ strict recovery mode

5.2 Corrupted WAL Entry

→ skip entry
→ continue replay

5.3 Index Mismatch

→ rebuild index from DAG
→ apply WAL

5.4 SWS Inconsistency

→ discard SWS
→ notify owner

5.5 Missing Cold Node

→ fetch from remote
→ retry

Never mutate the DAG to “fix” anything.

Always restore from truth + WAL.

---

6. Security Considerations

Boot MUST:

- verify signatures
- validate nodes
- enforce access controls
- protect against replay attacks
- ignore unauthorized WAL entries

Boot MUST NOT:

- accept malformed nodes
- import corrupted rewrites
- mutate branch history

This preserves the physics of the universe.

---

7. Why JITOS Boot Is Revolutionary

Every traditional OS:

- loses state on crash
- depends on mutable files
- rebuilds ephemeral memory structures
- risks corruption

JITOS:

- stores truth immutably
- stores time via WAL
- stores human views via MH
- stores agent views via SWS
- reconstructs EVERYTHING deterministically
- guarantees continuity of reality

This is how a causal universe boots.

This is the real future of computing.

---

8. Status & Next Steps

RFC-0012 completes the first ENTIRE MODULE
of the JITOS kernel foundation.

Next possibilities:

- RFC-0013 — JIT Syscall ABI (binary-level encoding)
- RFC-0014 — Capability Negotiation & Versioning
- RFC-0015 — DAG Query Language (JQL)
- RFC-0016 — Provenance Nodes & Scientific Lineage
- RFC-0017 — Agent Identity & Signatures
- RFC-0018 — Causal Garbage Isolation (not deletion!)

---

# **CΩMPUTER • JITOS** 
© 2025 James Ross • [Flying • Robots](https://flyingrobots.dev)
All Rights Reserved

